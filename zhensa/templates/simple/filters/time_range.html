<select name="time_range" id="time_range" class="time_range" aria-label="{{ _('Time range') }}">{{- '' -}}
    <option id="time-range-anytime" value="" {{ "selected" if time_range=="" or not time_range  else ""}}>
        {{- _('Anytime') -}}
    </option>{{- '' -}}
    <option id="time-range-day" value="day" {{ "selected" if time_range=="day" else ""}}>
        {{- _('Last day') -}}
    </option>{{- '' -}}
    <option id="time-range-week" value="week" {{ "selected" if time_range=="week" else ""}}>
        {{- _('Last week') -}}
    </option>{{- '' -}}
    <option id="time-range-month" value="month" {{ "selected" if time_range=="month" else ""}}>
        {{- _('Last month') -}}
    </option>{{- '' -}}
    <option id="time-range-year" value="year" {{ "selected" if time_range=="year" else ""}}>
        {{- _('Last year') -}}
    </option>{{- '' -}}
    <option id="time-range-custom" value="custom" {{ "selected" if time_range=="custom" or time_range.startswith('custom:') else ""}}>
        {{- _('Custom range') -}}
    </option>{{- '' -}}
</select>
<div id="custom-date-range" style="display: {{ 'block' if time_range == 'custom' or time_range.startswith('custom:') else 'none' }};">
    <label for="date_from">{{ _('From') }}:</label>
    <input type="date" id="date_from" name="date_from" value="{{ date_from or '' }}">
    <label for="date_to">{{ _('To') }}:</label>
    <input type="date" id="date_to" name="date_to" value="{{ date_to or '' }}">
</div>
<script>
document.getElementById('time_range').addEventListener('change', function() {
    const customRange = document.getElementById('custom-date-range');
    if (this.value === 'custom') {
        customRange.style.display = 'block';
    } else {
        customRange.style.display = 'none';
    }
});
</script>
