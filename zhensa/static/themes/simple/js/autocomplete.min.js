import{c as e,d as t,e as n,g as r}from"./zhensa.core.min.js";const i=async(i,a)=>{try{let o;o=r.method===`GET`?await t(`GET`,`./autocompleter?q=${a}`):await t(`POST`,`./autocompleter`,{body:new URLSearchParams({q:a})});let s=await o.json(),c=document.querySelector(`.autocomplete`);e(c);let l=document.querySelector(`.autocomplete ul`);if(e(l),c.classList.add(`open`),l.replaceChildren(),s?.[1]?.length===0){let e=Object.assign(document.createElement(`li`),{className:`no-item-found`,textContent:r.translations?.no_item_found??`No results found`});l.append(e);return}let u=new DocumentFragment;for(let e of s[1]){let t=Object.assign(document.createElement(`li`),{textContent:e});n(`mousedown`,t,()=>{i.value=e;let t=document.querySelector(`#search`);t?.submit(),c.classList.remove(`open`)}),u.append(t)}l.append(u)}catch(e){console.error(`Error fetching autocomplete results:`,e)}},a=document.getElementById(`q`);e(a);let o;const s=[],c=[`artificial intelligence`,`machine learning`,`web development`,`python programming`,`data science`,`cryptocurrency`,`climate change`,`electric vehicles`,`remote work`,`blockchain technology`];function l(e){if(!e.trim())return;let t=s.indexOf(e);t>-1&&s.splice(t,1),s.unshift(e),s.length>10&&s.splice(10),localStorage.setItem(`zhensa_search_history`,JSON.stringify(s))}function u(){try{let e=localStorage.getItem(`zhensa_search_history`);return e?JSON.parse(e):[]}catch{return[]}}function d(e){let t=u();e>=0&&e<t.length&&(t.splice(e,1),localStorage.setItem(`zhensa_search_history`,JSON.stringify(t)),p())}function f(){localStorage.removeItem(`zhensa_search_history`),s.length=0,p()}function p(){let e=document.querySelector(`.search-suggestions`),t=document.getElementById(`history-list`),n=document.getElementById(`trending-list`);if(!e||!t||!n)return;t.innerHTML=``,n.innerHTML=``;let r=u();r.length>0&&(r.forEach((e,n)=>{let r=document.createElement(`li`),i=document.createElement(`span`);i.textContent=e,i.className=`history-text`;let o=document.createElement(`button`);o.className=`delete-history-item`,o.textContent=`Ã—`,o.title=`Remove from history`,o.addEventListener(`click`,e=>{e.stopPropagation(),d(n)}),r.appendChild(i),r.appendChild(o),r.addEventListener(`click`,()=>{a.value=e,l(e),m();let t=document.querySelector(`#search`);t?.submit()}),t.appendChild(r)}),e.classList.add(`show`)),c.forEach(e=>{let t=document.createElement(`li`);t.textContent=e,t.addEventListener(`click`,()=>{a.value=e,l(e),m();let t=document.querySelector(`#search`);t?.submit()}),n.appendChild(t)}),(r.length>0||c.length>0)&&e.classList.add(`show`)}function m(){let e=document.querySelector(`.search-suggestions`);e&&e.classList.remove(`show`)}s.push(...u()),n(`focus`,a,()=>{a.value.length===0&&p()}),n(`blur`,a,()=>{setTimeout(()=>{m()},150)});const h=document.getElementById(`search`);h&&n(`submit`,h,()=>{let e=a.value.trim();e&&l(e)});const g=document.getElementById(`clear-history`);g&&n(`click`,g,e=>{e.preventDefault(),e.stopPropagation(),f()}),n(`input`,a,()=>{clearTimeout(o);let e=a.value,t=r.autocomplete_min??2;if(e.length<t){let t=document.querySelector(`.autocomplete`);t&&t.classList.remove(`open`),e.length===0?p():m();return}m(),o=window.setTimeout(async()=>{e===a.value&&await i(a,e)},0)});const _=document.querySelector(`.autocomplete`),v=document.querySelector(`.autocomplete ul`);v&&n(`keyup`,a,e=>{let t=[...v.children],n=t.findIndex(e=>e.classList.contains(`active`)),r=-1;switch(e.key){case`ArrowUp`:{let e=t[n];e&&n>=0&&e.classList.remove(`active`),r=(n-1+t.length)%t.length;break}case`ArrowDown`:{let e=t[n];e&&n>=0&&e.classList.remove(`active`),r=(n+1)%t.length;break}case`Tab`:case`Enter`:_&&_.classList.remove(`open`);break;default:break}if(r!==-1){let e=t[r];if(e&&(e.classList.add(`active`),!e.classList.contains(`no-item-found`))){let t=document.getElementById(`q`);t&&(t.value=e.textContent??``)}}});
//# sourceMappingURL=autocomplete.min.js.map